version: "3.8"

services:
  web:
    # Usa o Dockerfile.next na pasta atual para construir a imagem
    build:
      context: .
      dockerfile: Dockerfile.next

    container_name: nextjs-web-server
    restart: "always"

    # Mapeia a porta 3000 do container para a porta 8080 da sua VM
    ports:
      - "0.0.0.0:8080:3000"

    # ðŸ”‘ O MAIS IMPORTANTE: Mapeamento de Volume
    # Lado Esquerdo (VM): Onde o arquivo JSON realmente existe na sua VM.
    # Lado Direito (Container): O caminho EXATO que o cÃ³digo Next.js espera.
    volumes:
      - /teste/app/data:/teste/data
